import{_ as S,E as A,s as H,x as L,r as v,G as B,w as C,b as h,d as l,f as e,Q as F,S as O,F as g,h as V,A as j,z,c as d,g as p,i as N,H as M,t as f,p as R,k as U,B as $,C as G}from"./index-d614a8a0.js";const D=i=>(R("data-v-c73a43ef"),i=i(),U(),i),Q=D(()=>e("h1",{class:"border-bottom mb-4 fs-4 pb-3 fw-medium"},"收藏展覽",-1)),W={class:"row"},q={class:"col-12"},J={class:"row"},K={class:"border border-dark d-flex justify-content-between"},P={class:"d-flex"},X={class:"image-box"},Y=["src","alt"],Z={class:"p-2 d-flex flex-column justify-content-center"},m={class:"fw-bold text-hidden-1"},aa={class:"text-hidden-1 font-pathway text-info"},ta={class:"border-start border-dark p-3"},ea=["onClick"],sa={key:0},oa={key:1},ra=D(()=>e("div",null,null,-1)),ca={__name:"FavoriteList",setup(i){const k=A(),u=H(),I=L(u),b=v(""),x=v([]),c=v([]),o=v([]),T=s=>{o.value=c.value.map(t=>t),o.value=c.value.filter(t=>t.name.includes(s.target.value))},y=async()=>{var s;try{const t=await j((s=u.userData)==null?void 0:s.localId);x.value=Object.keys(t.data).filter(r=>t.data[r]===!0)}catch(t){console.log(t)}},w=async()=>{c.value=[],x.value.forEach(async s=>{const t=await z(s);c.value.push({id:s,...t.data,isTrack:!0})}),o.value=c.value},E=async s=>{var r,_;const t=o.value.findIndex(n=>n.id===s);if(o.value[t].isTrack=!o.value[t].isTrack,o.value[t].isTrack===!0)try{await $((r=u.userData)==null?void 0:r.localId,s)}catch{k.callAlert({title:"追蹤失敗",type:"error"})}else try{await G((_=u.userData)==null?void 0:_.localId,s)}catch{k.callAlert({title:"取消追蹤失敗",type:"error"})}};return B(async()=>{await y(),w()}),C(I.userData,()=>{y(),w()}),(s,t)=>{const r=h("router-link"),_=h("HeartIcon"),n=h("HeartOutlineIcon");return d(),l(g,null,[Q,e("div",W,[e("div",q,[e("div",null,[F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a),onInput:T,class:"form-control mb-4",type:"search",placeholder:"請輸入展覽名稱"},null,544),[[O,b.value]])]),e("ul",J,[(d(!0),l(g,null,V(o.value,a=>(d(),l("li",{class:"col-md-6 mb-4",key:a==null?void 0:a.id},[e("div",K,[e("div",P,[e("div",X,[e("img",{src:a==null?void 0:a.image,alt:a==null?void 0:a.name},null,8,Y)]),e("div",Z,[e("h2",m,[p(r,{class:"text-dark",to:`/viewExhibition/${a==null?void 0:a.id}`},{default:N(()=>[M(f(a==null?void 0:a.name),1)]),_:2},1032,["to"])]),e("time",aa,f(new Date(a==null?void 0:a.startDate).toLocaleDateString())+" ~ "+f(new Date(a==null?void 0:a.endDate).toLocaleDateString()),1)])]),e("div",ta,[e("button",{onClick:na=>E(a==null?void 0:a.id),class:"border-0 bg-transparent"},[(a==null?void 0:a.isTrack)===!0?(d(),l("div",sa,[p(_,{size:36})])):(d(),l("div",oa,[p(n,{size:36})]))],8,ea)])])]))),128))])])]),ra],64)}}},da=S(ca,[["__scopeId","data-v-c73a43ef"]]);export{da as default};
