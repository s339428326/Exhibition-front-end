import{J as x,a as g,s as k,E as y,r as f,b as S,c as n,d,f as s,N as V,O as $,q as e,g as C,i as F,F as B,P as D,L as p,t as _}from"./index-cfc24485.js";import{c as E,a as w,b as N}from"./index.esm-4834761f.js";const q=s("h1",{class:"border-bottom mb-4 fs-4 pb-3 fw-medium"},"修改密碼",-1),O={class:"row"},R={class:"col-md-9"},T={key:0,class:"d-flex gap-2 align-items-center"},A=s("label",{class:"form-label",for:"current_password"},"請先輸入目前密碼",-1),I={key:1},J={class:"d-flex flex-column"},L=s("label",{class:"form-label",for:"password"},"更改密碼",-1),M={class:"text-danger error-text"},U={class:"d-flex flex-column"},j=s("label",{class:"form-label",for:"confirmPassword"},"確認更改密碼",-1),z={class:"text-danger error-text"},G=s("button",{class:"btn btn-dark ms-auto",type:"submit"}," 更改 ",-1),ss={__name:"EditPassword",setup(H){const{errors:a,values:K,setValues:Q,handleSubmit:W,defineInputBinds:c,setErrors:X}=x({initialValues:{password:"",confirmPassword:""},validationSchema:E({password:w().required("請勿空白"),confirmPassword:w().oneOf([N("password")],"請確認密碼是否相同")})});g();const b=k();y();const r=f(""),l=f(!1),h=c("password"),v=c("confirmPassword"),P=async(t,o)=>{console.log("[change]",t,o),(await D({email:t,password:o,returnSecureToken:!0})).data?l.value=!0:l.value=!1};return(t,o)=>{const i=S("VeeForm");return n(),d(B,null,[q,s("div",O,[s("div",R,[l.value===!1?(n(),d("div",T,[s("div",null,[A,V(s("input",{"onUpdate:modelValue":o[0]||(o[0]=u=>r.value=u),placeholder:"請輸入目前密碼",class:"form-control",type:"password",id:"current_password"},null,512),[[$,r.value]])]),s("button",{onClick:o[1]||(o[1]=u=>{var m;return P((m=e(b).userData)==null?void 0:m.email,r.value)}),type:"button",class:"btn btn-dark mt-auto"}," 確認 ")])):(n(),d("div",I,[C(i,{class:"d-flex flex-column gap-3",onSubmit:t.submit},{default:F(()=>[s("div",J,[L,s("input",p({class:`form-control ${e(a).password&&"is-invalid"}`},e(h),{type:"password",name:"password",id:"password",placeholder:"請輸入更改密碼"}),null,16),s("small",M,_(e(a).password&&e(a).password),1)]),s("div",U,[j,s("input",p({class:`form-control ${e(a).confirmPassword&&"is-invalid"}`},e(v),{type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"請次確認更改密碼"}),null,16),s("small",z,_(e(a).confirmPassword&&e(a).confirmPassword),1)]),G]),_:1},8,["onSubmit"])]))])])],64)}}};export{ss as default};
